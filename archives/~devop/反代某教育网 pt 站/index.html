<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />
  
  <link rel="icon" type="image/svg+xml" href="/icons/favicon.svg">
  <link rel="alternate icon" href="/icons/favicon.png">

  <link href="https://cdn.jsdelivr.net/npm/bulma@0.9.1/css/bulma.min.css" rel="stylesheet" />
  <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.6.1/themes/folio/galleria.folio.min.css" rel="stylesheet" /> -->

  <!-- <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" /> -->

  <link href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;site.css' rel="stylesheet" />

  
  

  <title>
    
t3&#x27;s docs | åä»£æŸæ•™è‚²ç½‘ pt ç«™

  </title>

  <!-- <script crossorigin="anonymous" src="/js/201b8d5e05.js"></script> -->
  <script crossorigin="anonymous" src="/js/free.min.js"></script>
  <script crossorigin="anonymous" src="/js/free-v4-shims.min.js"></script>

  

  
</head>

<body class="has-background-white">
  
  <nav aria-label="section navigation" class="navbar is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item has-text-weight-bold" href="https:&#x2F;&#x2F;docs.tothetracker.link">t3&#x27;s docs</a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          <!-- å…¼å®¹ä¹‹å‰çš„å•è¯­è¨€ç‰ˆå¯¼èˆªæ  -->
                    
            
              <a class="navbar-item" href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;archives'>
                Archives
              </a>
            
              <a class="navbar-item" href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;tags'>
                Tags
              </a>
            
              <a class="navbar-item" href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;categories'>
                Categories
              </a>
                
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>
  

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title is-1">
            åä»£æŸæ•™è‚²ç½‘ pt ç«™
          </h1>
          <p class="subtitle"></p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
  <p class="has-text-grey">
    <span class="icon">
      <i class="fas fa-user"></i>
    </span>
    t3link published on
    
    <span class="icon">
      <i class="far fa-calendar-alt"></i>
    </span>
    <time datetime='2021-03-15'>March 15, 2021</time>
    
  </p>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
  <p class="has-text-grey">
    <span class="icon">
      <i class="far fa-clock"></i>
    </span>
    6 min,
    <span class="icon">
      <i class="fas fa-pencil-alt"></i>
    </span>
    1011 words
  </p>

            </div>
            <div class="column is-8">
              
            </div>
            <div class="column is-4 has-text-right-desktop">
            </div>
          </div>
          <div class="content mt-2">
            <p>æœ€è¿‘æƒ³ç»™æœ‹å‹å‘é€ä¸€ä¸ªé‚€è¯·ï¼Œä½†æ˜¯æˆ‘ç›®å‰ä¸åœ¨æ•™è‚²ç½‘ç¯å¢ƒï¼Œåªå¥½æ­ä¸€ä¸ªåä»£è¿›å»äº†ã€‚</p>
<p>è™½ç„¶æœ€åè¢«æ”¾é¸½å­äº†...</p>
<span id="continue-reading"></span><h2 id="å‡†å¤‡ä¸€ä¸ª_vps"><a class="zola-anchor" href="#å‡†å¤‡ä¸€ä¸ª_vps" aria-label="Anchor link for: å‡†å¤‡ä¸€ä¸ª_vps">
    #<span class="sub">2</span>
</a>
å‡†å¤‡ä¸€ä¸ª <code>vps</code></h2>
<p>é¦–é€‰éœ€è¦ä¸€ä¸ªæœ‰ <code>ipv6</code> ç½‘ç»œçš„æœåŠ¡å™¨ï¼Œæˆ‘è¿™é‡Œåªæ˜¯æ‰“ç®—ä¸´æ—¶è®¿é—®ä¸€äº›ï¼Œæ‰€ä»¥ä¸è€ƒè™‘ä»€ä¹ˆä»·é’±äº†ï¼Œç›´æ¥åœ¨ <a rel="noopener nofollow noreferrer" target="_blank" href="https://cloud.linode.com/linodes">linode</a> ä¸Šåˆ›å»ºäº†ä¸€ä¸ª <code>Singapore, SG</code> çš„èŠ‚ç‚¹ï¼Œé•œåƒé€‰æ‹© <code>Debian 10</code>ã€‚</p>
<p><code>linode</code> æ˜¯æŒ‰å°æ—¶ä»˜è´¹çš„ï¼Œç”¨å®Œäº†ç›´æ¥åˆ æ‰å®ä¾‹å°±è¡Œã€‚</p>
<p>å¦‚æœä¸å¹¸ç¢°åˆ°ä½ çš„ <code>vps</code> è¢«å¢™ï¼Œè¯·ä½¿ç”¨æ¢¯å­ä»£ç†è®¿é—®ã€‚</p>
<h2 id="ä¿®æ”¹_ssh_ç«¯å£"><a class="zola-anchor" href="#ä¿®æ”¹_ssh_ç«¯å£" aria-label="Anchor link for: ä¿®æ”¹_ssh_ç«¯å£">
    #<span class="sub">2</span>
</a>
ä¿®æ”¹ <code>ssh</code> ç«¯å£</h2>
<blockquote>
<p>è®°ä½ä»»ä½•ä¿®æ”¹ä¹‹å‰å…ˆå¤‡ä»½çš„åŸåˆ™</p>
</blockquote>
<p><code>linode</code> çš„ <code>Debian 10</code> é•œåƒé»˜è®¤å…è®¸ <code>root</code> ç”¨æˆ·å¯†ç è®¿é—®ï¼Œå¹¶ä¸”æ²¡æœ‰å¼€å¯é˜²ç«å¢™</p>
<p>é¦–å…ˆç¡®ä¿ä½ çš„ <code>ssh</code> å…¬é’¥ä¸Šä¼ åˆ°äº†æœåŠ¡å™¨çš„ <code>~/.ssh/authorized_keys</code></p>
<p>æµ‹è¯•ä¸‹æ˜¯å¦å¯ä»¥ç”¨å…¬é’¥ç›´æ¥è®¿é—®ï¼Œç„¶åå†ä¿®æ”¹ <code>/etc/ssh/sshd_config</code></p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;"># ä¿®æ”¹ç«¯å£
Port 28888
# å…³é—­ Root ç”¨æˆ·çš„å¯†ç è®¿é—®
PermitRootLogin without-password
</span></code></pre>
<p>ç„¶å <code>service sshd restart</code> é‡å¯ <code>ssh</code> æœåŠ¡</p>
<p>æµ‹è¯•ç«¯å£æ˜¯å¦ç›‘å¬ <code>lsof -i:28888</code></p>
<p>å…ˆä¸è¦é€€å‡ºå½“å‰ç»ˆç«¯ï¼Œå½“å‰ç»ˆç«¯ä»ç„¶ä½¿ç”¨é»˜è®¤çš„ <code>22</code> ç«¯å£è¿æ¥ç€</p>
<p>æ–°èµ·ä¸€ä¸ªç»ˆç«¯ä½¿ç”¨æ–°ç«¯å£è®¿é—® <code>ssh root@xx.xx.xx.xx -p 28888</code></p>
<h2 id="nginx_åä»£"><a class="zola-anchor" href="#nginx_åä»£" aria-label="Anchor link for: nginx_åä»£">
    #<span class="sub">2</span>
</a>
<code>nginx</code> åä»£</h2>
<p>å‡è®¾è¯¥æ ¡å›­ç½‘åŸå§‹åŸŸåæ˜¯ <code>https://bt.xxx.com</code>ï¼Œä½ çš„åä»£åŸŸåæ˜¯ <code>https://bt.yourdomain.com</code></p>
<h3 id="ç”Ÿæˆ_ssl_è¯ä¹¦"><a class="zola-anchor" href="#ç”Ÿæˆ_ssl_è¯ä¹¦" aria-label="Anchor link for: ç”Ÿæˆ_ssl_è¯ä¹¦">
    #<span class="sub">3</span>
</a>
ç”Ÿæˆ <code>ssl</code> è¯ä¹¦</h3>
<p>è¿™ä¸€æ­¥å½“ç„¶æ˜¯å¯é€‰çš„ï¼Œæˆ‘çŸ¥è¯†è®°å½•ä¸€ä¸‹ã€‚</p>
<p>ç›®å‰æˆ‘è§‰å¾—æœ€ç®€å•çš„æ–¹å¼ç”Ÿæˆ <code>Let's Encrypt</code> å…è´¹è¯ä¹¦çš„æ–¹å¼æ˜¯ <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/acmesh-official/acme.sh">acme.sh</a>ï¼Œå…¶ä»–æ–¹å¼ä¹Ÿå¯ä»¥å‚è€ƒ <a rel="noopener nofollow noreferrer" target="_blank" href="https://letsencrypt.org/docs/client-options/">letsencrypt-client-options</a></p>
<p>é¦–å…ˆå®‰è£… <code>curl  https://get.acme.sh | sh</code>ï¼Œæ‰€æœ‰çš„æ–‡ä»¶ä¿®æ”¹éƒ½ä¼šåœ¨ <code>~/.acme.sh/</code> ä¸‹å‘ç”Ÿã€‚</p>
<p>è¿™ä¸€æ­¥åº”è¯¥ä¼šæç¤ºä½ å¦‚æœéœ€è¦ä½¿ç”¨ <code>standalone</code> æ¨¡å¼ï¼Œéœ€è¦å…ˆå®‰è£… <code>apt install socat -y</code></p>
<p><code>standalone</code> å°±æ˜¯ <code>acme</code> è‡ªå·±å½“ä½œä¸€ä¸ª <code>Web</code> æœåŠ¡å™¨ï¼Œä½†æ˜¯éœ€è¦ä¿è¯ <code>80</code> ç«¯å£æ²¡æœ‰è¢«å ç”¨ã€‚</p>
<p>è¿™ä¸ªåº”è¯¥æ˜¯æœ€ç®€å•çš„äº†ï¼Œæ²¡æœ‰å…¶ä»–æœåŠ¡çš„å¹²æ‰°ã€‚</p>
<p>ä¸‹é¢ç”Ÿæˆ <code>bt.yourdomain.com</code> åŸŸåçš„è¯ä¹¦</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">acme.sh --issue -d bt.yourdomain.com --standalone

...
[Mon 15 Mar 2021 12:27:28 PM UTC] Your cert is in  /root/.acme.sh/bt.yourdomain.com/bt.yourdomain.com.cer
[Mon 15 Mar 2021 12:27:28 PM UTC] Your cert key is in  /root/.acme.sh/bt.yourdomain.com/bt.yourdomain.com.key
[Mon 15 Mar 2021 12:27:28 PM UTC] The intermediate CA cert is in  /root/.acme.sh/bt.yourdomain.com/ca.cer
[Mon 15 Mar 2021 12:27:28 PM UTC] And the full chain certs is there:  /root/.acme.sh/bt.yourdomain.com/fullchain.cer
</span></code></pre>
<p>å†è½¬æ¢æˆ <code>nginx</code> æ‰€ä½¿ç”¨çš„è¯ä¹¦æ ¼å¼</p>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">acme.sh --install-cert -d bt.yourdomain.com \
--key-file       /root/.acme.sh/bt.yourdomain.com/nginx/key.pem  \
--fullchain-file /root/.acme.sh/bt.yourdomain.com/nginx/cert.pem
</span></code></pre><h3 id="åä»£"><a class="zola-anchor" href="#åä»£" aria-label="Anchor link for: åä»£">
    #<span class="sub">3</span>
</a>
åä»£</h3>
<ol>
<li>
<p>é¦–å…ˆå®‰è£… <code>apt install nginx -y</code>ï¼Œé…ç½®æ–‡ä»¶åœ¨ <code>/etc/nginx/</code> é‡Œ</p>
</li>
<li>
<p>æ–°å»ºåä»£è§„åˆ™æ–‡ä»¶</p>
</li>
</ol>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">vim /etc/nginx/bt_proxy.conf

location / {
    proxy_pass          https://bt.xxx.com/;
    proxy_redirect      default;
    proxy_set_header    Accept-Encoding &quot;&quot;;
    proxy_set_header    X-Real-IP       $remote_addr;
    proxy_set_header    X-Forwarded-For $proxy_add_x_forwarded_for;

    subs_filter src=&quot;https?://bt.xxx.com/ src=&quot;/ ir;
    subs_filter href=&quot;https?://bt.xxx.com/ href=&quot;/ ir;
}
</span></code></pre>
<ol start="3">
<li>æ–°å»ºç¦æ­¢ç½‘ç»œèœ˜è››çˆ¬å–è§„åˆ™</li>
</ol>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">vim /etc/nginx/spider403.conf

location = /robots.txt {
    default_type text/html;
    add_header Content-Type &quot;text/plain; charset=UTF-8&quot;;
    return 200 &quot;User-Agent: *\nDisallow: /&quot;;
}

if ($http_user_agent ~* &quot;qihoobot|Baiduspider|Googlebot|Googlebot-Mobile|Googlebot-Image|Mediapartners-Google|Adsbot-Google|Feedfetcher-Google|Yahoo! Slurp|Yahoo! Slurp China|YoudaoBot|Sosospider|Sogou spider|Sogou web spider|MSNBot|ia_archiver|Tomato Bot&quot;) {
    return 403;
}
</span></code></pre>
<ol start="4">
<li>æ–°å»ºç«™ç‚¹é…ç½®æ–‡ä»¶</li>
</ol>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">vim /etc/nginx/sites-enabled/bt.yourdomain.com.conf

server {
    listen          80;
    server_name     bt.yourdomain.com;
    include         spider403.conf;

    # å¦‚æœä¸éœ€è¦å¼ºåˆ¶ 301 è·³è½¬åˆ° https æ‰“å¼€ä¸‹é¢çš„æ³¨é‡Š
    # include       bt_proxy.conf;
    # å¹¶ä¸”æ³¨é‡Šæ‰ä¸‹é¢é‚£å¥
    return          301 https://$server_name$request_uri;
}
server {
    listen          443 ssl;
    server_name     bt.yourdomain.com;
    include         spider403.conf;

    client_max_body_size 40m;

    # sslè¯ä¹¦åœ°å€
    ssl_certificate      /root/.acme.sh/bt.yourdomain.com/nginx/cert.pem;  # pemæ–‡ä»¶çš„è·¯å¾„
    ssl_certificate_key  /root/.acme.sh/bt.yourdomain.com/nginx/key.pem;   # keyæ–‡ä»¶çš„è·¯å¾„

    # ssléªŒè¯ç›¸å…³é…ç½®
    ssl_session_timeout  5m;    #ç¼“å­˜æœ‰æ•ˆæœŸ
    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    #åŠ å¯†ç®—æ³•
    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    #å®‰å…¨é“¾æ¥å¯é€‰çš„åŠ å¯†åè®®
    ssl_prefer_server_ciphers on;   #ä½¿ç”¨æœåŠ¡å™¨ç«¯çš„é¦–é€‰ç®—æ³•

    include         bt_proxy.conf;
}
</span></code></pre>
<ol start="5">
<li>æµ‹è¯•å¹¶è¿è¡Œ</li>
</ol>
<pre style="background-color:#fdf6e3;">
<code><span style="color:#657b83;">nginx -t

service nginx restart
</span></code></pre>
<ol start="6">
<li>æ·»åŠ  <code>DNS</code> è®°å½•</li>
</ol>
<p>å¦‚æœä½¿ç”¨äº† <a rel="noopener nofollow noreferrer" target="_blank" href="https://dash.cloudflare.com/">cloudflare</a> çš„ <code>CDN</code> (å·²ä»£ç†)ï¼Œå¹¶ä¸”ä½ çš„ç½‘ç«™å¼ºåˆ¶äº† <code>301 https</code> è·³è½¬ã€‚</p>
<p>é‚£ä¹ˆ <code>cloudflare</code> çš„ <code>SSL/TLS</code> åŠ å¯†æ¨¡å¼è¦è®¾ç½®ä¸º <code>Full</code> æˆ–è€… <code>Strict</code> </p>
<p>ç°åœ¨ä½ å¯ä»¥ç”¨ <code>https://bt.yourdomain.com</code> æ¥è®¿é—® <code>https://bt.xxx.com</code> äº†</p>
<p>å¦‚æœç›´æ¥ç”¨ <code>ip</code> è®¿é—®ä¼šèµ°åˆ° <code>/etc/nginx/site-enabled/default</code> çš„ <code>default_server</code></p>

          </div>
          <div class="columns is-multiline is-gapless">
            <div class="column">
              
              
  <p>
    <span class="has-text-black has-text-weight-normal">Categories:</span>
    
      <a class="link has-text-weight-light" href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;categories&#x2F;è¿ç»´å¼€å‘&#x2F;'>
        <span class="icon is-small">
          <i class="fas fa-folder fa-xs"></i>
        </span>
        è¿ç»´å¼€å‘
      </a>
    
  </p>

              
            </div>
            <div class="column has-text-right-desktop">
              
              
  <p>
    <span class="has-text-black has-text-weight-normal">Tags:</span>
    
      <a class="link has-text-weight-light" href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;tags&#x2F;nginx&#x2F;'>
        <span class="icon is-small">
          <i class="fas fa-tag fa-xs"></i>
        </span>
        nginx
      </a>
    
      <a class="link has-text-weight-light" href='https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;tags&#x2F;linux&#x2F;'>
        <span class="icon is-small">
          <i class="fas fa-tag fa-xs"></i>
        </span>
        linux
      </a>
    
  </p>

              
            </div>
          </div>
        </article>
      </div>
      
      <div class="column is-2 is-hidden-mobile">
        <aside class="menu" style="position: sticky; top: 48px">
          <div class="esa-catalog-title">CONTENTS</div>
          <ul class="menu-list">
            
            <li>
              <a id="link-å‡†å¤‡ä¸€ä¸ª_vps" class="toc is-size-7 is-active" href="https://docs.tothetracker.link/archives/~devop/åä»£æŸæ•™è‚²ç½‘ pt ç«™/#å‡†å¤‡ä¸€ä¸ª_vps">
                å‡†å¤‡ä¸€ä¸ª vps
              </a>
              
            </li>
            
            <li>
              <a id="link-ä¿®æ”¹_ssh_ç«¯å£" class="toc is-size-7 " href="https://docs.tothetracker.link/archives/~devop/åä»£æŸæ•™è‚²ç½‘ pt ç«™/#ä¿®æ”¹_ssh_ç«¯å£">
                ä¿®æ”¹ ssh ç«¯å£
              </a>
              
            </li>
            
            <li>
              <a id="link-nginx_åä»£" class="toc is-size-7 " href="https://docs.tothetracker.link/archives/~devop/åä»£æŸæ•™è‚²ç½‘ pt ç«™/#nginx_åä»£">
                nginx åä»£
              </a>
              
              <ul>
                
                <li>
                  <a id="link-ç”Ÿæˆ_ssl_è¯ä¹¦" class="toc is-size-7" href="https://docs.tothetracker.link/archives/~devop/åä»£æŸæ•™è‚²ç½‘ pt ç«™/#ç”Ÿæˆ_ssl_è¯ä¹¦">
                    ç”Ÿæˆ ssl è¯ä¹¦
                  </a>
                </li>
                
                <li>
                  <a id="link-åä»£" class="toc is-size-7" href="https://docs.tothetracker.link/archives/~devop/åä»£æŸæ•™è‚²ç½‘ pt ç«™/#åä»£">
                    åä»£
                  </a>
                </li>
                
              </ul>
              
            </li>
            
          </ul>
        </aside>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-content">
      <div class="field">
        <p class="control has-icons-right">
          <input class="input" id="search" placeholder="Search this website." type="search" />
          <span class="icon is-small is-right">
            <i class="fas fa-search"></i>
          </span>
        </p>
      </div>
      <div class="search-results">
        <div class="search-results__items"></div>
      </div>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section" style="padding-top: 0;">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
           
          <div class="has-text-centered">
            <a class="earlier" href="https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;archives&#x2F;~bookmarks&#x2F;github pages æ–‡ä»¶å¤¹ä¸­ä½¿ç”¨æ³¢æµªå·&#x2F;">
              github pages æ–‡ä»¶å¤¹ä½¿ç”¨æ³¢æµªå·<span class="icon">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
          
        </nav>
      </div>
    </div>
  </div>
</section>



  

<section class="section" style="padding-top: 0;">
  <div class="container">
    <div class="columns is-centered">
      <div class="column">
        <div id="hyvor-talk-view">
          <script src="https://utteranc.es/client.js"
                  repo="t3link/t3link.github.io"
                  issue-number="4"
                  label="^ğŸ’¬"
                  theme="github-light"
                  crossorigin="anonymous"
                  async>
          </script>
        </div>
      </div>
    </div>
  </div>
</section>



  
  <footer class="py-4 has-background-light">
    <p class="has-text-centered">
      Built with
      <span class="icon is-small">
        <i class="fas fa-code fa-xs"></i>
      </span>
      code and
      <span class="icon is-small">
        <i class="fas fa-heart fa-xs"></i>
      </span>
      love <br /> Powered By
      <span class="icon is-small">
        <i class="fas fa-power-off fa-xs"></i>
      </span>
      <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/getzola/zola">Zola</a> with <a rel="noopener nofollow noreferrer" target="_blank" href="https://github.com/t3link/DeepThought">DeepThought</a>
    </p>
  </footer>
  <a class="back-to-top" id="scroll_to_top_id">
    <div>
        <span><img src="https:&#x2F;&#x2F;docs.tothetracker.link&#x2F;images&#x2F;back_top.png"/></span>
    </div>
    <div style="float: right;">
        <span id="scrollpercent">0</span>%
    </div>
</a>
  

  <script src="/js/jquery-3.5.1.min.js"></script>
  <!-- <script src="https://cdn.jsdelivr.net/npm/sharer.js@latest/sharer.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script> -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/chart.xkcd@1/dist/chart.xkcd.min.js"></script> -->

  <!-- <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script> -->

  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.6.1/galleria.min.js"></script> -->
  <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/galleria/1.6.1/themes/folio/galleria.folio.min.js"></script> -->

  <script src="/js/site.js"></script>

  <script src="/js/elasticlunr.min.js"></script>
  <script src="/search_index.en.js"></script>

  <script src="/js/scroll.js"></script>

  <!-- block çš„ç”¨æ³•:Â çˆ¶æ¨¡ç‰ˆå®šä¹‰blockï¼Œå­æ¨¡ç‰ˆä¸­é‡å†™ -->
  

<script type="text/javascript">
  const menuBarHeight = $("nav.navbar").height();
  const tocItems = $('.toc');
  const navSections = new Array($('.toc').length);

  tocItems.each(function (i) {
    let id = $(this).attr("id").substring(5);
    navSections[i] = document.getElementById(id);
  })

  function isVisible(tocIndex) {
    const current = navSections[tocIndex];
    const next = tocIndex < tocItems.length - 1 ? navSections[tocIndex+1] : $("section.section").get(1);
    
    const c = current.getBoundingClientRect();
    const n = next.getBoundingClientRect();
    const h = (window.innerHeight || document.documentElement.clientHeight);

    return (c.top <= h) && (c.top + (n.top - c.top) - menuBarHeight >= 0);
  }

  function activateIfVisible() {
    for (b = true, i = 0; i < tocItems.length; i++) {
      if (b && isVisible(i)) {
        tocItems[i].classList.add('is-active');
        b = false;
      } else
        tocItems[i].classList.remove('is-active');
    }
  }

  var isTicking = null;
  window.addEventListener('scroll', () => {
    if (!isTicking) {
      window.requestAnimationFrame(() => {
        activateIfVisible();
        isTicking = false;
      });
      isTicking = true;
    }
  }, false);
</script>


</body>

</html>
